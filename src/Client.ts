// This file was auto-generated by Fern from our API Definition.

import { AudioIsolationClient } from "./api/resources/audioIsolation/client/Client";
import { AudioNativeClient } from "./api/resources/audioNative/client/Client";
import { ConversationalAiClient } from "./api/resources/conversationalAi/client/Client";
import { DubbingClient } from "./api/resources/dubbing/client/Client";
import { ForcedAlignmentClient } from "./api/resources/forcedAlignment/client/Client";
import { HistoryClient } from "./api/resources/history/client/Client";
import { ModelsClient } from "./api/resources/models/client/Client";
import { MusicClient } from "./api/resources/music/client/Client";
import { PronunciationDictionariesClient } from "./api/resources/pronunciationDictionaries/client/Client";
import { SamplesClient } from "./api/resources/samples/client/Client";
import { ServiceAccountsClient } from "./api/resources/serviceAccounts/client/Client";
import { SpeechToSpeechClient } from "./api/resources/speechToSpeech/client/Client";
import { SpeechToTextClient } from "./api/resources/speechToText/client/Client";
import { StudioClient } from "./api/resources/studio/client/Client";
import { TextToDialogueClient } from "./api/resources/textToDialogue/client/Client";
import { TextToSoundEffectsClient } from "./api/resources/textToSoundEffects/client/Client";
import { TextToSpeechClient } from "./api/resources/textToSpeech/client/Client";
import { TextToVoiceClient } from "./api/resources/textToVoice/client/Client";
import { TokensClient } from "./api/resources/tokens/client/Client";
import { UsageClient } from "./api/resources/usage/client/Client";
import { UserClient } from "./api/resources/user/client/Client";
import { VoicesClient } from "./api/resources/voices/client/Client";
import { WebhooksClient } from "./api/resources/webhooks/client/Client";
import { WorkspaceClient } from "./api/resources/workspace/client/Client";
import type { BaseClientOptions, BaseRequestOptions } from "./BaseClient";
import { type NormalizedClientOptions, normalizeClientOptions } from "./BaseClient";
import * as core from "./core";
import { mergeHeaders, mergeOnlyDefinedHeaders } from "./core/headers";
import * as environments from "./environments";
import { handleNonStatusCodeError } from "./errors/handleNonStatusCodeError";
import * as errors from "./errors/index";

export declare namespace ElevenLabsClient {
    export type Options = BaseClientOptions;

    export interface RequestOptions extends BaseRequestOptions {}
}

export class ElevenLabsClient {
    protected readonly _options: NormalizedClientOptions<ElevenLabsClient.Options>;
    protected _history: HistoryClient | undefined;
    protected _textToSoundEffects: TextToSoundEffectsClient | undefined;
    protected _audioIsolation: AudioIsolationClient | undefined;
    protected _samples: SamplesClient | undefined;
    protected _textToSpeech: TextToSpeechClient | undefined;
    protected _textToDialogue: TextToDialogueClient | undefined;
    protected _speechToSpeech: SpeechToSpeechClient | undefined;
    protected _textToVoice: TextToVoiceClient | undefined;
    protected _user: UserClient | undefined;
    protected _voices: VoicesClient | undefined;
    protected _studio: StudioClient | undefined;
    protected _dubbing: DubbingClient | undefined;
    protected _models: ModelsClient | undefined;
    protected _audioNative: AudioNativeClient | undefined;
    protected _usage: UsageClient | undefined;
    protected _pronunciationDictionaries: PronunciationDictionariesClient | undefined;
    protected _serviceAccounts: ServiceAccountsClient | undefined;
    protected _webhooks: WebhooksClient | undefined;
    protected _speechToText: SpeechToTextClient | undefined;
    protected _forcedAlignment: ForcedAlignmentClient | undefined;
    protected _conversationalAi: ConversationalAiClient | undefined;
    protected _music: MusicClient | undefined;
    protected _tokens: TokensClient | undefined;
    protected _workspace: WorkspaceClient | undefined;

    constructor(options: ElevenLabsClient.Options = {}) {
        this._options = normalizeClientOptions(options);
    }

    public get history(): HistoryClient {
        return (this._history ??= new HistoryClient(this._options));
    }

    public get textToSoundEffects(): TextToSoundEffectsClient {
        return (this._textToSoundEffects ??= new TextToSoundEffectsClient(this._options));
    }

    public get audioIsolation(): AudioIsolationClient {
        return (this._audioIsolation ??= new AudioIsolationClient(this._options));
    }

    public get samples(): SamplesClient {
        return (this._samples ??= new SamplesClient(this._options));
    }

    public get textToSpeech(): TextToSpeechClient {
        return (this._textToSpeech ??= new TextToSpeechClient(this._options));
    }

    public get textToDialogue(): TextToDialogueClient {
        return (this._textToDialogue ??= new TextToDialogueClient(this._options));
    }

    public get speechToSpeech(): SpeechToSpeechClient {
        return (this._speechToSpeech ??= new SpeechToSpeechClient(this._options));
    }

    public get textToVoice(): TextToVoiceClient {
        return (this._textToVoice ??= new TextToVoiceClient(this._options));
    }

    public get user(): UserClient {
        return (this._user ??= new UserClient(this._options));
    }

    public get voices(): VoicesClient {
        return (this._voices ??= new VoicesClient(this._options));
    }

    public get studio(): StudioClient {
        return (this._studio ??= new StudioClient(this._options));
    }

    public get dubbing(): DubbingClient {
        return (this._dubbing ??= new DubbingClient(this._options));
    }

    public get models(): ModelsClient {
        return (this._models ??= new ModelsClient(this._options));
    }

    public get audioNative(): AudioNativeClient {
        return (this._audioNative ??= new AudioNativeClient(this._options));
    }

    public get usage(): UsageClient {
        return (this._usage ??= new UsageClient(this._options));
    }

    public get pronunciationDictionaries(): PronunciationDictionariesClient {
        return (this._pronunciationDictionaries ??= new PronunciationDictionariesClient(this._options));
    }

    public get serviceAccounts(): ServiceAccountsClient {
        return (this._serviceAccounts ??= new ServiceAccountsClient(this._options));
    }

    public get webhooks(): WebhooksClient {
        return (this._webhooks ??= new WebhooksClient(this._options));
    }

    public get speechToText(): SpeechToTextClient {
        return (this._speechToText ??= new SpeechToTextClient(this._options));
    }

    public get forcedAlignment(): ForcedAlignmentClient {
        return (this._forcedAlignment ??= new ForcedAlignmentClient(this._options));
    }

    public get conversationalAi(): ConversationalAiClient {
        return (this._conversationalAi ??= new ConversationalAiClient(this._options));
    }

    public get music(): MusicClient {
        return (this._music ??= new MusicClient(this._options));
    }

    public get tokens(): TokensClient {
        return (this._tokens ??= new TokensClient(this._options));
    }

    public get workspace(): WorkspaceClient {
        return (this._workspace ??= new WorkspaceClient(this._options));
    }

    /**
     * @param {ElevenLabsClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.postV1ConvaiWhatsappAccounts()
     */
    public postV1ConvaiWhatsappAccounts(
        requestOptions?: ElevenLabsClient.RequestOptions,
    ): core.HttpResponsePromise<void> {
        return core.HttpResponsePromise.fromPromise(this.__postV1ConvaiWhatsappAccounts(requestOptions));
    }

    private async __postV1ConvaiWhatsappAccounts(
        requestOptions?: ElevenLabsClient.RequestOptions,
    ): Promise<core.WithRawResponse<void>> {
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            this._options?.headers,
            mergeOnlyDefinedHeaders({ "xi-api-key": requestOptions?.apiKey ?? this._options?.apiKey }),
            requestOptions?.headers,
        );
        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.ElevenLabsEnvironment.Production,
                "v1/convai/whatsapp-accounts",
            ),
            method: "POST",
            headers: _headers,
            queryParameters: requestOptions?.queryParams,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 240) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: undefined, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.ElevenLabsError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        return handleNonStatusCodeError(_response.error, _response.rawResponse, "POST", "/v1/convai/whatsapp-accounts");
    }

    /**
     * @param {string} agent_id
     * @param {string} branch_id
     * @param {ElevenLabsClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.deleteV1ConvaiAgentsAgentIdBranchesBranchId("agent_id", "branch_id")
     */
    public deleteV1ConvaiAgentsAgentIdBranchesBranchId(
        agent_id: string,
        branch_id: string,
        requestOptions?: ElevenLabsClient.RequestOptions,
    ): core.HttpResponsePromise<void> {
        return core.HttpResponsePromise.fromPromise(
            this.__deleteV1ConvaiAgentsAgentIdBranchesBranchId(agent_id, branch_id, requestOptions),
        );
    }

    private async __deleteV1ConvaiAgentsAgentIdBranchesBranchId(
        agent_id: string,
        branch_id: string,
        requestOptions?: ElevenLabsClient.RequestOptions,
    ): Promise<core.WithRawResponse<void>> {
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            this._options?.headers,
            mergeOnlyDefinedHeaders({ "xi-api-key": requestOptions?.apiKey ?? this._options?.apiKey }),
            requestOptions?.headers,
        );
        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.ElevenLabsEnvironment.Production,
                `v1/convai/agents/${core.url.encodePathParam(agent_id)}/branches/${core.url.encodePathParam(branch_id)}`,
            ),
            method: "DELETE",
            headers: _headers,
            queryParameters: requestOptions?.queryParams,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 240) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: undefined, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.ElevenLabsError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "DELETE",
            "/v1/convai/agents/{agent_id}/branches/{branch_id}",
        );
    }

    /**
     * Add a generated voice to the voice library.
     *
     * @param {ElevenLabsClient.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.saveAVoicePreview()
     */
    public saveAVoicePreview(requestOptions?: ElevenLabsClient.RequestOptions): core.HttpResponsePromise<void> {
        return core.HttpResponsePromise.fromPromise(this.__saveAVoicePreview(requestOptions));
    }

    private async __saveAVoicePreview(
        requestOptions?: ElevenLabsClient.RequestOptions,
    ): Promise<core.WithRawResponse<void>> {
        const _headers: core.Fetcher.Args["headers"] = mergeHeaders(
            this._options?.headers,
            mergeOnlyDefinedHeaders({ "xi-api-key": requestOptions?.apiKey ?? this._options?.apiKey }),
            requestOptions?.headers,
        );
        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.ElevenLabsEnvironment.Production,
                "v1/text-to-voice/create-voice-from-preview",
            ),
            method: "POST",
            headers: _headers,
            queryParameters: requestOptions?.queryParams,
            timeoutMs: (requestOptions?.timeoutInSeconds ?? this._options?.timeoutInSeconds ?? 240) * 1000,
            maxRetries: requestOptions?.maxRetries ?? this._options?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
            fetchFn: this._options?.fetch,
            logging: this._options.logging,
        });
        if (_response.ok) {
            return { data: undefined, rawResponse: _response.rawResponse };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.ElevenLabsError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        return handleNonStatusCodeError(
            _response.error,
            _response.rawResponse,
            "POST",
            "/v1/text-to-voice/create-voice-from-preview",
        );
    }
}
