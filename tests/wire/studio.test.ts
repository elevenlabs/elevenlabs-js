// This file was auto-generated by Fern from our API Definition.

import { ElevenLabsClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("StudioClient", () => {
    test("create_podcast", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            model_id: "eleven_multilingual_v2",
            mode: {
                type: "conversation",
                conversation: { host_voice_id: "aw1NgEzBg83R7vgmiJt6", guest_voice_id: "aw1NgEzBg83R7vgmiJt7" },
            },
            source: { type: "text", text: "This is a test podcast." },
        };
        const rawResponseBody = {
            project: {
                project_id: "aw1NgEzBg83R7vgmiJt6",
                name: "My Project",
                create_date_unix: 1714204800,
                created_by_user_id: "Vbtgl3bRdj6lk79rYAgx",
                default_title_voice_id: "JBFqnCBsd6RMkjVDRZzb",
                default_paragraph_voice_id: "JBFqnCBsd6RMkjVDRZzb",
                default_model_id: "eleven_multilingual_v2",
                last_conversion_date_unix: 1714204800,
                can_be_downloaded: true,
                title: "My Project",
                author: "John Doe",
                description: "This is a description of my project.",
                genres: ["Novel", "Short Story"],
                cover_image_url: "https://example.com/cover.jpg",
                target_audience: "young adult",
                language: "en",
                content_type: "Novel",
                original_publication_date: "2025-01-01",
                mature_content: false,
                isbn_number: "978-90-274-3964-2",
                volume_normalization: true,
                state: "default",
                access_level: "viewer",
                fiction: "fiction",
                quality_check_on: false,
                quality_check_on_when_bulk_convert: false,
                creation_meta: { creation_progress: 0.5, status: "pending", type: "blank" },
                source_type: "blank",
                chapters_enabled: true,
                captions_enabled: true,
                caption_style: {
                    template: { key: "key", label: "label" },
                    text_font: "text_font",
                    text_scale: 1.1,
                    text_color: "text_color",
                    text_align: "start",
                    text_style: "normal",
                    text_weight: "normal",
                    background_enabled: true,
                    background_color: "background_color",
                    background_opacity: 1.1,
                    word_highlights_enabled: true,
                    word_highlights_color: "word_highlights_color",
                    word_highlights_background_color: "word_highlights_background_color",
                    word_highlights_opacity: 1.1,
                    section_animation: { enter_type: "none", exit_type: "none" },
                    word_animation: { enter_type: "none", exit_type: "none" },
                    character_animation: { enter_type: "none", exit_type: "none" },
                    width_pct: 1.1,
                    horizontal_placement: { align: "left", translate_pct: 1.1 },
                    vertical_placement: { align: "top", translate_pct: 1.1 },
                    auto_break_enabled: true,
                    max_lines_per_section: 1,
                    max_words_per_line: 1,
                },
                caption_style_template_overrides: { key: {} },
                public_share_id: "abc123def456789",
                aspect_ratio: "16:9",
            },
        };
        server
            .mockEndpoint()
            .post("/v1/studio/podcasts")
            .header("safety-identifier", "safety-identifier")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.studio.createPodcast({
            safetyIdentifier: "safety-identifier",
            modelId: "eleven_multilingual_v2",
            mode: {
                type: "conversation",
                conversation: {
                    hostVoiceId: "aw1NgEzBg83R7vgmiJt6",
                    guestVoiceId: "aw1NgEzBg83R7vgmiJt7",
                },
            },
            source: {
                type: "text",
                text: "This is a test podcast.",
            },
        });
        expect(response).toEqual({
            project: {
                projectId: "aw1NgEzBg83R7vgmiJt6",
                name: "My Project",
                createDateUnix: 1714204800,
                createdByUserId: "Vbtgl3bRdj6lk79rYAgx",
                defaultTitleVoiceId: "JBFqnCBsd6RMkjVDRZzb",
                defaultParagraphVoiceId: "JBFqnCBsd6RMkjVDRZzb",
                defaultModelId: "eleven_multilingual_v2",
                lastConversionDateUnix: 1714204800,
                canBeDownloaded: true,
                title: "My Project",
                author: "John Doe",
                description: "This is a description of my project.",
                genres: ["Novel", "Short Story"],
                coverImageUrl: "https://example.com/cover.jpg",
                targetAudience: "young adult",
                language: "en",
                contentType: "Novel",
                originalPublicationDate: "2025-01-01",
                matureContent: false,
                isbnNumber: "978-90-274-3964-2",
                volumeNormalization: true,
                state: "default",
                accessLevel: "viewer",
                fiction: "fiction",
                qualityCheckOn: false,
                qualityCheckOnWhenBulkConvert: false,
                creationMeta: {
                    creationProgress: 0.5,
                    status: "pending",
                    type: "blank",
                },
                sourceType: "blank",
                chaptersEnabled: true,
                captionsEnabled: true,
                captionStyle: {
                    template: {
                        key: "key",
                        label: "label",
                    },
                    textFont: "text_font",
                    textScale: 1.1,
                    textColor: "text_color",
                    textAlign: "start",
                    textStyle: "normal",
                    textWeight: "normal",
                    backgroundEnabled: true,
                    backgroundColor: "background_color",
                    backgroundOpacity: 1.1,
                    wordHighlightsEnabled: true,
                    wordHighlightsColor: "word_highlights_color",
                    wordHighlightsBackgroundColor: "word_highlights_background_color",
                    wordHighlightsOpacity: 1.1,
                    sectionAnimation: {
                        enterType: "none",
                        exitType: "none",
                    },
                    wordAnimation: {
                        enterType: "none",
                        exitType: "none",
                    },
                    characterAnimation: {
                        enterType: "none",
                        exitType: "none",
                    },
                    widthPct: 1.1,
                    horizontalPlacement: {
                        align: "left",
                        translatePct: 1.1,
                    },
                    verticalPlacement: {
                        align: "top",
                        translatePct: 1.1,
                    },
                    autoBreakEnabled: true,
                    maxLinesPerSection: 1,
                    maxWordsPerLine: 1,
                },
                captionStyleTemplateOverrides: {
                    key: {},
                },
                publicShareId: "abc123def456789",
                aspectRatio: "16:9",
            },
        });
    });
});
