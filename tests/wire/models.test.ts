/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool";
import { ElevenLabsClient } from "../../src/Client";

describe("Models", () => {
    test("list", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({
            apiKey: "test",
            environment: { base: server.baseUrl, wss: server.baseUrl },
        });

        const rawResponseBody = [
            {
                model_id: "eleven_multilingual_v2",
                name: "Eleven Multilingual v2",
                can_be_finetuned: true,
                can_do_text_to_speech: true,
                can_do_voice_conversion: true,
                can_use_style: true,
                can_use_speaker_boost: true,
                serves_pro_voices: false,
                token_cost_factor: 1,
                description:
                    "Our state of the art multilingual speech synthesis model, able to generate life-like speech in 29 languages.",
                requires_alpha_access: false,
                max_characters_request_free_user: 2500,
                max_characters_request_subscribed_user: 5000,
                maximum_text_length_per_request: 1000000,
                languages: [{ language_id: "en", name: "English" }],
                model_rates: { character_cost_multiplier: 1 },
                concurrency_group: "standard",
            },
        ];
        server.mockEndpoint().get("/v1/models").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.models.list();
        expect(response).toEqual([
            {
                modelId: "eleven_multilingual_v2",
                name: "Eleven Multilingual v2",
                canBeFinetuned: true,
                canDoTextToSpeech: true,
                canDoVoiceConversion: true,
                canUseStyle: true,
                canUseSpeakerBoost: true,
                servesProVoices: false,
                tokenCostFactor: 1,
                description:
                    "Our state of the art multilingual speech synthesis model, able to generate life-like speech in 29 languages.",
                requiresAlphaAccess: false,
                maxCharactersRequestFreeUser: 2500,
                maxCharactersRequestSubscribedUser: 5000,
                maximumTextLengthPerRequest: 1000000,
                languages: [
                    {
                        languageId: "en",
                        name: "English",
                    },
                ],
                modelRates: {
                    characterCostMultiplier: 1,
                },
                concurrencyGroup: "standard",
            },
        ]);
    });
});
