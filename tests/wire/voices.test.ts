/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool";
import { ElevenLabsClient } from "../../src/Client";

describe("Voices", () => {
    test("get_all", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            voices: [
                {
                    voice_id: "21m00Tcm4TlvDq8ikWAM",
                    name: "Rachel",
                    samples: [
                        {
                            sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                            file_name: "sample.mp3",
                            mime_type: "audio/mpeg",
                            size_bytes: 1000000,
                            hash: "1234567890",
                        },
                    ],
                    category: "professional",
                    fine_tuning: {
                        is_allowed_to_fine_tune: true,
                        state: { eleven_multilingual_v2: "fine_tuned" },
                        verification_failures: ["verification_failures"],
                        verification_attempts_count: 2,
                        manual_verification_requested: false,
                    },
                    labels: {
                        accent: "American",
                        age: "middle-aged",
                        description: "expressive",
                        gender: "female",
                        use_case: "social media",
                    },
                    description: "A warm, expressive voice with a touch of humor.",
                    preview_url:
                        "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                    available_for_tiers: ["creator", "enterprise"],
                    settings: { stability: 1, use_speaker_boost: true, similarity_boost: 1, style: 0, speed: 1 },
                    sharing: {
                        status: "enabled",
                        history_item_sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        date_unix: 1714204800,
                        whitelisted_emails: ["example@example.com"],
                        public_owner_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        original_voice_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        financial_rewards_enabled: true,
                        free_users_allowed: true,
                        live_moderation_enabled: true,
                        rate: 0.05,
                        notice_period: 30,
                        disable_at_unix: 1714204800,
                        voice_mixing_allowed: false,
                        featured: true,
                        category: "professional",
                        reader_app_enabled: true,
                        liked_by_count: 100,
                        cloned_by_count: 50,
                        name: "Rachel",
                        description: "A female voice with a soft and friendly tone.",
                        labels: { accent: "American", gender: "female" },
                        review_status: "allowed",
                        enabled_in_library: true,
                        moderation_check: {
                            date_checked_unix: 1714204800,
                            name_value: "Rachel",
                            name_check: true,
                            description_value: "A female voice with a soft and friendly tone.",
                            description_check: true,
                            sample_ids: ["sample1", "sample2"],
                            sample_checks: [0.95, 0.98],
                            captcha_ids: ["captcha1", "captcha2"],
                            captcha_checks: [0.95, 0.98],
                        },
                        reader_restricted_on: [{ resource_type: "read", resource_id: "FCwhRBWXzGAHq8TQ4Fs18" }],
                    },
                    high_quality_base_model_ids: [
                        "eleven_v2_flash",
                        "eleven_flash_v2",
                        "eleven_turbo_v2_5",
                        "eleven_multilingual_v2",
                        "eleven_v2_5_flash",
                        "eleven_flash_v2_5",
                        "eleven_turbo_v2",
                    ],
                    verified_languages: [
                        {
                            language: "en",
                            model_id: "eleven_multilingual_v2",
                            accent: "american",
                            locale: "en-US",
                            preview_url:
                                "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                        },
                    ],
                    safety_control: "NONE",
                    voice_verification: {
                        requires_verification: false,
                        is_verified: true,
                        verification_failures: ["verification_failures"],
                        verification_attempts_count: 0,
                        language: "en",
                        verification_attempts: [
                            {
                                text: "Hello, how are you?",
                                date_unix: 1714204800,
                                accepted: true,
                                similarity: 0.95,
                                levenshtein_distance: 2,
                                recording: {
                                    recording_id: "CwhRBWXzGAHq8TQ4Fs17",
                                    mime_type: "audio/mpeg",
                                    size_bytes: 1000000,
                                    upload_date_unix: 1714204800,
                                    transcription: "Hello, how are you?",
                                },
                            },
                        ],
                    },
                    permission_on_resource: "permission_on_resource",
                    is_owner: false,
                    is_legacy: false,
                    is_mixed: false,
                    favorited_at_unix: 1,
                    created_at_unix: 1,
                },
            ],
        };
        server.mockEndpoint().get("/v1/voices").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.voices.getAll();
        expect(response).toEqual({
            voices: [
                {
                    voiceId: "21m00Tcm4TlvDq8ikWAM",
                    name: "Rachel",
                    samples: [
                        {
                            sampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                            fileName: "sample.mp3",
                            mimeType: "audio/mpeg",
                            sizeBytes: 1000000,
                            hash: "1234567890",
                        },
                    ],
                    category: "professional",
                    fineTuning: {
                        isAllowedToFineTune: true,
                        state: {
                            eleven_multilingual_v2: "fine_tuned",
                        },
                        verificationFailures: ["verification_failures"],
                        verificationAttemptsCount: 2,
                        manualVerificationRequested: false,
                    },
                    labels: {
                        accent: "American",
                        age: "middle-aged",
                        description: "expressive",
                        gender: "female",
                        use_case: "social media",
                    },
                    description: "A warm, expressive voice with a touch of humor.",
                    previewUrl:
                        "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                    availableForTiers: ["creator", "enterprise"],
                    settings: {
                        stability: 1,
                        useSpeakerBoost: true,
                        similarityBoost: 1,
                        style: 0,
                        speed: 1,
                    },
                    sharing: {
                        status: "enabled",
                        historyItemSampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                        dateUnix: 1714204800,
                        whitelistedEmails: ["example@example.com"],
                        publicOwnerId: "DCwhRBWXzGAHq8TQ4Fs18",
                        originalVoiceId: "DCwhRBWXzGAHq8TQ4Fs18",
                        financialRewardsEnabled: true,
                        freeUsersAllowed: true,
                        liveModerationEnabled: true,
                        rate: 0.05,
                        noticePeriod: 30,
                        disableAtUnix: 1714204800,
                        voiceMixingAllowed: false,
                        featured: true,
                        category: "professional",
                        readerAppEnabled: true,
                        likedByCount: 100,
                        clonedByCount: 50,
                        name: "Rachel",
                        description: "A female voice with a soft and friendly tone.",
                        labels: {
                            accent: "American",
                            gender: "female",
                        },
                        reviewStatus: "allowed",
                        enabledInLibrary: true,
                        moderationCheck: {
                            dateCheckedUnix: 1714204800,
                            nameValue: "Rachel",
                            nameCheck: true,
                            descriptionValue: "A female voice with a soft and friendly tone.",
                            descriptionCheck: true,
                            sampleIds: ["sample1", "sample2"],
                            sampleChecks: [0.95, 0.98],
                            captchaIds: ["captcha1", "captcha2"],
                            captchaChecks: [0.95, 0.98],
                        },
                        readerRestrictedOn: [
                            {
                                resourceType: "read",
                                resourceId: "FCwhRBWXzGAHq8TQ4Fs18",
                            },
                        ],
                    },
                    highQualityBaseModelIds: [
                        "eleven_v2_flash",
                        "eleven_flash_v2",
                        "eleven_turbo_v2_5",
                        "eleven_multilingual_v2",
                        "eleven_v2_5_flash",
                        "eleven_flash_v2_5",
                        "eleven_turbo_v2",
                    ],
                    verifiedLanguages: [
                        {
                            language: "en",
                            modelId: "eleven_multilingual_v2",
                            accent: "american",
                            locale: "en-US",
                            previewUrl:
                                "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                        },
                    ],
                    safetyControl: "NONE",
                    voiceVerification: {
                        requiresVerification: false,
                        isVerified: true,
                        verificationFailures: ["verification_failures"],
                        verificationAttemptsCount: 0,
                        language: "en",
                        verificationAttempts: [
                            {
                                text: "Hello, how are you?",
                                dateUnix: 1714204800,
                                accepted: true,
                                similarity: 0.95,
                                levenshteinDistance: 2,
                                recording: {
                                    recordingId: "CwhRBWXzGAHq8TQ4Fs17",
                                    mimeType: "audio/mpeg",
                                    sizeBytes: 1000000,
                                    uploadDateUnix: 1714204800,
                                    transcription: "Hello, how are you?",
                                },
                            },
                        ],
                    },
                    permissionOnResource: "permission_on_resource",
                    isOwner: false,
                    isLegacy: false,
                    isMixed: false,
                    favoritedAtUnix: 1,
                    createdAtUnix: 1,
                },
            ],
        });
    });

    test("search", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            voices: [
                {
                    voice_id: "21m00Tcm4TlvDq8ikWAM",
                    name: "Rachel",
                    samples: [
                        {
                            sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                            file_name: "sample.mp3",
                            mime_type: "audio/mpeg",
                            size_bytes: 1000000,
                            hash: "1234567890",
                        },
                    ],
                    category: "professional",
                    fine_tuning: {
                        is_allowed_to_fine_tune: true,
                        state: { eleven_multilingual_v2: "fine_tuned" },
                        verification_failures: ["verification_failures"],
                        verification_attempts_count: 2,
                        manual_verification_requested: false,
                    },
                    labels: {
                        accent: "American",
                        age: "middle-aged",
                        description: "expressive",
                        gender: "female",
                        use_case: "social media",
                    },
                    description: "A warm, expressive voice with a touch of humor.",
                    preview_url:
                        "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                    available_for_tiers: ["creator", "enterprise"],
                    settings: { stability: 1, use_speaker_boost: true, similarity_boost: 1, style: 0, speed: 1 },
                    sharing: {
                        status: "enabled",
                        history_item_sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        date_unix: 1714204800,
                        whitelisted_emails: ["example@example.com"],
                        public_owner_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        original_voice_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        financial_rewards_enabled: true,
                        free_users_allowed: true,
                        live_moderation_enabled: true,
                        rate: 0.05,
                        notice_period: 30,
                        disable_at_unix: 1714204800,
                        voice_mixing_allowed: false,
                        featured: true,
                        category: "professional",
                        reader_app_enabled: true,
                        liked_by_count: 100,
                        cloned_by_count: 50,
                        name: "Rachel",
                        description: "A female voice with a soft and friendly tone.",
                        labels: { accent: "American", gender: "female" },
                        review_status: "allowed",
                        enabled_in_library: true,
                        moderation_check: {
                            date_checked_unix: 1714204800,
                            name_value: "Rachel",
                            name_check: true,
                            description_value: "A female voice with a soft and friendly tone.",
                            description_check: true,
                            sample_ids: ["sample1", "sample2"],
                            sample_checks: [0.95, 0.98],
                            captcha_ids: ["captcha1", "captcha2"],
                            captcha_checks: [0.95, 0.98],
                        },
                        reader_restricted_on: [{ resource_type: "read", resource_id: "FCwhRBWXzGAHq8TQ4Fs18" }],
                    },
                    high_quality_base_model_ids: [
                        "eleven_v2_flash",
                        "eleven_flash_v2",
                        "eleven_turbo_v2_5",
                        "eleven_multilingual_v2",
                        "eleven_v2_5_flash",
                        "eleven_flash_v2_5",
                        "eleven_turbo_v2",
                    ],
                    verified_languages: [
                        {
                            language: "en",
                            model_id: "eleven_multilingual_v2",
                            accent: "american",
                            locale: "en-US",
                            preview_url:
                                "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                        },
                    ],
                    safety_control: "NONE",
                    voice_verification: {
                        requires_verification: false,
                        is_verified: true,
                        verification_failures: ["verification_failures"],
                        verification_attempts_count: 0,
                        language: "en",
                        verification_attempts: [
                            {
                                text: "Hello, how are you?",
                                date_unix: 1714204800,
                                accepted: true,
                                similarity: 0.95,
                                levenshtein_distance: 2,
                                recording: {
                                    recording_id: "CwhRBWXzGAHq8TQ4Fs17",
                                    mime_type: "audio/mpeg",
                                    size_bytes: 1000000,
                                    upload_date_unix: 1714204800,
                                    transcription: "Hello, how are you?",
                                },
                            },
                        ],
                    },
                    permission_on_resource: "permission_on_resource",
                    is_owner: false,
                    is_legacy: false,
                    is_mixed: false,
                    favorited_at_unix: 1,
                    created_at_unix: 1,
                },
            ],
            has_more: true,
            total_count: 1,
            next_page_token: "next_page_token",
        };
        server.mockEndpoint().get("/v2/voices").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.voices.search({
            includeTotalCount: true,
        });
        expect(response).toEqual({
            voices: [
                {
                    voiceId: "21m00Tcm4TlvDq8ikWAM",
                    name: "Rachel",
                    samples: [
                        {
                            sampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                            fileName: "sample.mp3",
                            mimeType: "audio/mpeg",
                            sizeBytes: 1000000,
                            hash: "1234567890",
                        },
                    ],
                    category: "professional",
                    fineTuning: {
                        isAllowedToFineTune: true,
                        state: {
                            eleven_multilingual_v2: "fine_tuned",
                        },
                        verificationFailures: ["verification_failures"],
                        verificationAttemptsCount: 2,
                        manualVerificationRequested: false,
                    },
                    labels: {
                        accent: "American",
                        age: "middle-aged",
                        description: "expressive",
                        gender: "female",
                        use_case: "social media",
                    },
                    description: "A warm, expressive voice with a touch of humor.",
                    previewUrl:
                        "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                    availableForTiers: ["creator", "enterprise"],
                    settings: {
                        stability: 1,
                        useSpeakerBoost: true,
                        similarityBoost: 1,
                        style: 0,
                        speed: 1,
                    },
                    sharing: {
                        status: "enabled",
                        historyItemSampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                        dateUnix: 1714204800,
                        whitelistedEmails: ["example@example.com"],
                        publicOwnerId: "DCwhRBWXzGAHq8TQ4Fs18",
                        originalVoiceId: "DCwhRBWXzGAHq8TQ4Fs18",
                        financialRewardsEnabled: true,
                        freeUsersAllowed: true,
                        liveModerationEnabled: true,
                        rate: 0.05,
                        noticePeriod: 30,
                        disableAtUnix: 1714204800,
                        voiceMixingAllowed: false,
                        featured: true,
                        category: "professional",
                        readerAppEnabled: true,
                        likedByCount: 100,
                        clonedByCount: 50,
                        name: "Rachel",
                        description: "A female voice with a soft and friendly tone.",
                        labels: {
                            accent: "American",
                            gender: "female",
                        },
                        reviewStatus: "allowed",
                        enabledInLibrary: true,
                        moderationCheck: {
                            dateCheckedUnix: 1714204800,
                            nameValue: "Rachel",
                            nameCheck: true,
                            descriptionValue: "A female voice with a soft and friendly tone.",
                            descriptionCheck: true,
                            sampleIds: ["sample1", "sample2"],
                            sampleChecks: [0.95, 0.98],
                            captchaIds: ["captcha1", "captcha2"],
                            captchaChecks: [0.95, 0.98],
                        },
                        readerRestrictedOn: [
                            {
                                resourceType: "read",
                                resourceId: "FCwhRBWXzGAHq8TQ4Fs18",
                            },
                        ],
                    },
                    highQualityBaseModelIds: [
                        "eleven_v2_flash",
                        "eleven_flash_v2",
                        "eleven_turbo_v2_5",
                        "eleven_multilingual_v2",
                        "eleven_v2_5_flash",
                        "eleven_flash_v2_5",
                        "eleven_turbo_v2",
                    ],
                    verifiedLanguages: [
                        {
                            language: "en",
                            modelId: "eleven_multilingual_v2",
                            accent: "american",
                            locale: "en-US",
                            previewUrl:
                                "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                        },
                    ],
                    safetyControl: "NONE",
                    voiceVerification: {
                        requiresVerification: false,
                        isVerified: true,
                        verificationFailures: ["verification_failures"],
                        verificationAttemptsCount: 0,
                        language: "en",
                        verificationAttempts: [
                            {
                                text: "Hello, how are you?",
                                dateUnix: 1714204800,
                                accepted: true,
                                similarity: 0.95,
                                levenshteinDistance: 2,
                                recording: {
                                    recordingId: "CwhRBWXzGAHq8TQ4Fs17",
                                    mimeType: "audio/mpeg",
                                    sizeBytes: 1000000,
                                    uploadDateUnix: 1714204800,
                                    transcription: "Hello, how are you?",
                                },
                            },
                        ],
                    },
                    permissionOnResource: "permission_on_resource",
                    isOwner: false,
                    isLegacy: false,
                    isMixed: false,
                    favoritedAtUnix: 1,
                    createdAtUnix: 1,
                },
            ],
            hasMore: true,
            totalCount: 1,
            nextPageToken: "next_page_token",
        });
    });

    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            voice_id: "21m00Tcm4TlvDq8ikWAM",
            name: "Rachel",
            samples: [
                {
                    sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                    file_name: "sample.mp3",
                    mime_type: "audio/mpeg",
                    size_bytes: 1000000,
                    hash: "1234567890",
                    duration_secs: 1.1,
                    remove_background_noise: true,
                    has_isolated_audio: true,
                    has_isolated_audio_preview: true,
                    speaker_separation: {
                        voice_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                        status: "not_started",
                    },
                    trim_start: 1,
                    trim_end: 1,
                },
            ],
            category: "professional",
            fine_tuning: {
                is_allowed_to_fine_tune: true,
                state: { eleven_multilingual_v2: "fine_tuned" },
                verification_failures: ["verification_failures"],
                verification_attempts_count: 2,
                manual_verification_requested: false,
                language: "language",
                progress: { key: 1.1 },
                message: { key: "value" },
                dataset_duration_seconds: 1.1,
                verification_attempts: [
                    {
                        text: "Hello, how are you?",
                        date_unix: 1714204800,
                        accepted: true,
                        similarity: 0.95,
                        levenshtein_distance: 2,
                        recording: {
                            recording_id: "CwhRBWXzGAHq8TQ4Fs17",
                            mime_type: "audio/mpeg",
                            size_bytes: 1000000,
                            upload_date_unix: 1714204800,
                            transcription: "Hello, how are you?",
                        },
                    },
                ],
                slice_ids: ["slice_ids"],
                manual_verification: {
                    extra_text: "Please verify the voice is that of a female.",
                    request_time_unix: 1714204800,
                    files: [
                        {
                            file_id: "CwhRBWXzGAHq8TQ4Fs18",
                            file_name: "file.mp3",
                            mime_type: "audio/mpeg",
                            size_bytes: 1000000,
                            upload_date_unix: 1714204800,
                        },
                    ],
                },
                max_verification_attempts: 1,
                next_max_verification_attempts_reset_unix_ms: 1,
                finetuning_state: { key: "value" },
            },
            labels: {
                accent: "American",
                age: "middle-aged",
                description: "expressive",
                gender: "female",
                use_case: "social media",
            },
            description: "A warm, expressive voice with a touch of humor.",
            preview_url:
                "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
            available_for_tiers: ["creator", "enterprise"],
            settings: { stability: 1, use_speaker_boost: true, similarity_boost: 1, style: 0, speed: 1 },
            sharing: {
                status: "enabled",
                history_item_sample_id: "DCwhRBWXzGAHq8TQ4Fs18",
                date_unix: 1714204800,
                whitelisted_emails: ["example@example.com"],
                public_owner_id: "DCwhRBWXzGAHq8TQ4Fs18",
                original_voice_id: "DCwhRBWXzGAHq8TQ4Fs18",
                financial_rewards_enabled: true,
                free_users_allowed: true,
                live_moderation_enabled: true,
                rate: 0.05,
                fiat_rate: 1.1,
                notice_period: 30,
                disable_at_unix: 1714204800,
                voice_mixing_allowed: false,
                featured: true,
                category: "professional",
                reader_app_enabled: true,
                image_url: "image_url",
                ban_reason: "ban_reason",
                liked_by_count: 100,
                cloned_by_count: 50,
                name: "Rachel",
                description: "A female voice with a soft and friendly tone.",
                labels: { accent: "American", gender: "female" },
                review_status: "allowed",
                review_message: "review_message",
                enabled_in_library: true,
                instagram_username: "instagram_username",
                twitter_username: "twitter_username",
                youtube_username: "youtube_username",
                tiktok_username: "tiktok_username",
                moderation_check: {
                    date_checked_unix: 1714204800,
                    name_value: "Rachel",
                    name_check: true,
                    description_value: "A female voice with a soft and friendly tone.",
                    description_check: true,
                    sample_ids: ["sample1", "sample2"],
                    sample_checks: [0.95, 0.98],
                    captcha_ids: ["captcha1", "captcha2"],
                    captcha_checks: [0.95, 0.98],
                },
                reader_restricted_on: [{ resource_type: "read", resource_id: "FCwhRBWXzGAHq8TQ4Fs18" }],
            },
            high_quality_base_model_ids: [
                "eleven_v2_flash",
                "eleven_flash_v2",
                "eleven_turbo_v2_5",
                "eleven_multilingual_v2",
                "eleven_v2_5_flash",
                "eleven_flash_v2_5",
                "eleven_turbo_v2",
            ],
            verified_languages: [
                {
                    language: "en",
                    model_id: "eleven_multilingual_v2",
                    accent: "american",
                    locale: "en-US",
                    preview_url:
                        "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                },
            ],
            safety_control: "NONE",
            voice_verification: {
                requires_verification: false,
                is_verified: true,
                verification_failures: ["verification_failures"],
                verification_attempts_count: 0,
                language: "en",
                verification_attempts: [
                    {
                        text: "Hello, how are you?",
                        date_unix: 1714204800,
                        accepted: true,
                        similarity: 0.95,
                        levenshtein_distance: 2,
                        recording: {
                            recording_id: "CwhRBWXzGAHq8TQ4Fs17",
                            mime_type: "audio/mpeg",
                            size_bytes: 1000000,
                            upload_date_unix: 1714204800,
                            transcription: "Hello, how are you?",
                        },
                    },
                ],
            },
            permission_on_resource: "permission_on_resource",
            is_owner: false,
            is_legacy: false,
            is_mixed: false,
            favorited_at_unix: 1,
            created_at_unix: 1,
        };
        server
            .mockEndpoint()
            .get("/v1/voices/21m00Tcm4TlvDq8ikWAM")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.voices.get("21m00Tcm4TlvDq8ikWAM");
        expect(response).toEqual({
            voiceId: "21m00Tcm4TlvDq8ikWAM",
            name: "Rachel",
            samples: [
                {
                    sampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                    fileName: "sample.mp3",
                    mimeType: "audio/mpeg",
                    sizeBytes: 1000000,
                    hash: "1234567890",
                    durationSecs: 1.1,
                    removeBackgroundNoise: true,
                    hasIsolatedAudio: true,
                    hasIsolatedAudioPreview: true,
                    speakerSeparation: {
                        voiceId: "DCwhRBWXzGAHq8TQ4Fs18",
                        sampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                        status: "not_started",
                    },
                    trimStart: 1,
                    trimEnd: 1,
                },
            ],
            category: "professional",
            fineTuning: {
                isAllowedToFineTune: true,
                state: {
                    eleven_multilingual_v2: "fine_tuned",
                },
                verificationFailures: ["verification_failures"],
                verificationAttemptsCount: 2,
                manualVerificationRequested: false,
                language: "language",
                progress: {
                    key: 1.1,
                },
                message: {
                    key: "value",
                },
                datasetDurationSeconds: 1.1,
                verificationAttempts: [
                    {
                        text: "Hello, how are you?",
                        dateUnix: 1714204800,
                        accepted: true,
                        similarity: 0.95,
                        levenshteinDistance: 2,
                        recording: {
                            recordingId: "CwhRBWXzGAHq8TQ4Fs17",
                            mimeType: "audio/mpeg",
                            sizeBytes: 1000000,
                            uploadDateUnix: 1714204800,
                            transcription: "Hello, how are you?",
                        },
                    },
                ],
                sliceIds: ["slice_ids"],
                manualVerification: {
                    extraText: "Please verify the voice is that of a female.",
                    requestTimeUnix: 1714204800,
                    files: [
                        {
                            fileId: "CwhRBWXzGAHq8TQ4Fs18",
                            fileName: "file.mp3",
                            mimeType: "audio/mpeg",
                            sizeBytes: 1000000,
                            uploadDateUnix: 1714204800,
                        },
                    ],
                },
                maxVerificationAttempts: 1,
                nextMaxVerificationAttemptsResetUnixMs: 1,
                finetuningState: {
                    key: "value",
                },
            },
            labels: {
                accent: "American",
                age: "middle-aged",
                description: "expressive",
                gender: "female",
                use_case: "social media",
            },
            description: "A warm, expressive voice with a touch of humor.",
            previewUrl:
                "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
            availableForTiers: ["creator", "enterprise"],
            settings: {
                stability: 1,
                useSpeakerBoost: true,
                similarityBoost: 1,
                style: 0,
                speed: 1,
            },
            sharing: {
                status: "enabled",
                historyItemSampleId: "DCwhRBWXzGAHq8TQ4Fs18",
                dateUnix: 1714204800,
                whitelistedEmails: ["example@example.com"],
                publicOwnerId: "DCwhRBWXzGAHq8TQ4Fs18",
                originalVoiceId: "DCwhRBWXzGAHq8TQ4Fs18",
                financialRewardsEnabled: true,
                freeUsersAllowed: true,
                liveModerationEnabled: true,
                rate: 0.05,
                fiatRate: 1.1,
                noticePeriod: 30,
                disableAtUnix: 1714204800,
                voiceMixingAllowed: false,
                featured: true,
                category: "professional",
                readerAppEnabled: true,
                imageUrl: "image_url",
                banReason: "ban_reason",
                likedByCount: 100,
                clonedByCount: 50,
                name: "Rachel",
                description: "A female voice with a soft and friendly tone.",
                labels: {
                    accent: "American",
                    gender: "female",
                },
                reviewStatus: "allowed",
                reviewMessage: "review_message",
                enabledInLibrary: true,
                instagramUsername: "instagram_username",
                twitterUsername: "twitter_username",
                youtubeUsername: "youtube_username",
                tiktokUsername: "tiktok_username",
                moderationCheck: {
                    dateCheckedUnix: 1714204800,
                    nameValue: "Rachel",
                    nameCheck: true,
                    descriptionValue: "A female voice with a soft and friendly tone.",
                    descriptionCheck: true,
                    sampleIds: ["sample1", "sample2"],
                    sampleChecks: [0.95, 0.98],
                    captchaIds: ["captcha1", "captcha2"],
                    captchaChecks: [0.95, 0.98],
                },
                readerRestrictedOn: [
                    {
                        resourceType: "read",
                        resourceId: "FCwhRBWXzGAHq8TQ4Fs18",
                    },
                ],
            },
            highQualityBaseModelIds: [
                "eleven_v2_flash",
                "eleven_flash_v2",
                "eleven_turbo_v2_5",
                "eleven_multilingual_v2",
                "eleven_v2_5_flash",
                "eleven_flash_v2_5",
                "eleven_turbo_v2",
            ],
            verifiedLanguages: [
                {
                    language: "en",
                    modelId: "eleven_multilingual_v2",
                    accent: "american",
                    locale: "en-US",
                    previewUrl:
                        "https://storage.googleapis.com/eleven-public-prod/premade/voices/9BWtsMINqrJLrRacOk9x/405766b8-1f4e-4d3c-aba1-6f25333823ec.mp3",
                },
            ],
            safetyControl: "NONE",
            voiceVerification: {
                requiresVerification: false,
                isVerified: true,
                verificationFailures: ["verification_failures"],
                verificationAttemptsCount: 0,
                language: "en",
                verificationAttempts: [
                    {
                        text: "Hello, how are you?",
                        dateUnix: 1714204800,
                        accepted: true,
                        similarity: 0.95,
                        levenshteinDistance: 2,
                        recording: {
                            recordingId: "CwhRBWXzGAHq8TQ4Fs17",
                            mimeType: "audio/mpeg",
                            sizeBytes: 1000000,
                            uploadDateUnix: 1714204800,
                            transcription: "Hello, how are you?",
                        },
                    },
                ],
            },
            permissionOnResource: "permission_on_resource",
            isOwner: false,
            isLegacy: false,
            isMixed: false,
            favoritedAtUnix: 1,
            createdAtUnix: 1,
        });
    });

    test("delete", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = { status: "ok" };
        server
            .mockEndpoint()
            .delete("/v1/voices/21m00Tcm4TlvDq8ikWAM")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.voices.delete("21m00Tcm4TlvDq8ikWAM");
        expect(response).toEqual({
            status: "ok",
        });
    });

    test("share", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { new_name: "John Smith" };
        const rawResponseBody = { voice_id: "b38kUX8pkfYO2kHyqfFy" };
        server
            .mockEndpoint()
            .post(
                "/v1/voices/add/63e06b7e7cafdc46be4d2e0b3f045940231ae058d508589653d74d1265a574ca/21m00Tcm4TlvDq8ikWAM",
            )
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.voices.share(
            "63e06b7e7cafdc46be4d2e0b3f045940231ae058d508589653d74d1265a574ca",
            "21m00Tcm4TlvDq8ikWAM",
            {
                newName: "John Smith",
            },
        );
        expect(response).toEqual({
            voiceId: "b38kUX8pkfYO2kHyqfFy",
        });
    });

    test("get_shared", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            voices: [
                {
                    public_owner_id: "63e84100a6bf7874ba37a1bab9a31828a379ec94b891b401653b655c5110880f",
                    voice_id: "sB1b5zUrxQVAFl2PhZFp",
                    date_unix: 1714423232,
                    name: "Alita",
                    accent: "american",
                    gender: "Female",
                    age: "young",
                    descriptive: "calm",
                    use_case: "characters_animation",
                    category: "professional",
                    language: "en",
                    locale: "locale",
                    description: "Perfectly calm, neutral and strong voice. Great for a young female protagonist.",
                    preview_url:
                        "https://storage.googleapis.com/eleven-public-prod/wqkMCd9huxXHX1dy5mLJn4QEQHj1/voices/sB1b5zUrxQVAFl2PhZFp/55e71aac-5cb7-4b3d-8241-429388160509.mp3",
                    usage_character_count_1y: 12852,
                    usage_character_count_7d: 12852,
                    play_api_usage_character_count_1y: 12852,
                    cloned_by_count: 11,
                    rate: 1,
                    fiat_rate: 1.1,
                    free_users_allowed: true,
                    live_moderation_enabled: false,
                    featured: false,
                    verified_languages: [
                        {
                            language: "en",
                            model_id: "eleven_multilingual_v2",
                            accent: "american",
                            locale: "en-US",
                            preview_url:
                                "https://storage.googleapis.com/eleven-public-prod/wqkMCd9huxXHX1dy5mLJn4QEQHj1/voices/sB1b5zUrxQVAFl2PhZFp/55e71aac-5cb7-4b3d-8241-429388160509.mp3",
                        },
                    ],
                    notice_period: 1,
                    instagram_username: "instagram_username",
                    twitter_username: "twitter_username",
                    youtube_username: "youtube_username",
                    tiktok_username: "tiktok_username",
                    image_url: "image_url",
                    is_added_by_user: true,
                },
            ],
            has_more: false,
            last_sort_id: "last_sort_id",
        };
        server.mockEndpoint().get("/v1/shared-voices").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.voices.getShared({
            featured: true,
            readerAppEnabled: true,
        });
        expect(response).toEqual({
            voices: [
                {
                    publicOwnerId: "63e84100a6bf7874ba37a1bab9a31828a379ec94b891b401653b655c5110880f",
                    voiceId: "sB1b5zUrxQVAFl2PhZFp",
                    dateUnix: 1714423232,
                    name: "Alita",
                    accent: "american",
                    gender: "Female",
                    age: "young",
                    descriptive: "calm",
                    useCase: "characters_animation",
                    category: "professional",
                    language: "en",
                    locale: "locale",
                    description: "Perfectly calm, neutral and strong voice. Great for a young female protagonist.",
                    previewUrl:
                        "https://storage.googleapis.com/eleven-public-prod/wqkMCd9huxXHX1dy5mLJn4QEQHj1/voices/sB1b5zUrxQVAFl2PhZFp/55e71aac-5cb7-4b3d-8241-429388160509.mp3",
                    usageCharacterCount1Y: 12852,
                    usageCharacterCount7D: 12852,
                    playApiUsageCharacterCount1Y: 12852,
                    clonedByCount: 11,
                    rate: 1,
                    fiatRate: 1.1,
                    freeUsersAllowed: true,
                    liveModerationEnabled: false,
                    featured: false,
                    verifiedLanguages: [
                        {
                            language: "en",
                            modelId: "eleven_multilingual_v2",
                            accent: "american",
                            locale: "en-US",
                            previewUrl:
                                "https://storage.googleapis.com/eleven-public-prod/wqkMCd9huxXHX1dy5mLJn4QEQHj1/voices/sB1b5zUrxQVAFl2PhZFp/55e71aac-5cb7-4b3d-8241-429388160509.mp3",
                        },
                    ],
                    noticePeriod: 1,
                    instagramUsername: "instagram_username",
                    twitterUsername: "twitter_username",
                    youtubeUsername: "youtube_username",
                    tiktokUsername: "tiktok_username",
                    imageUrl: "image_url",
                    isAddedByUser: true,
                },
            ],
            hasMore: false,
            lastSortId: "last_sort_id",
        });
    });
});
