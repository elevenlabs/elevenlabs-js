// This file was auto-generated by Fern from our API Definition.

import { ElevenLabsClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("UserClient", () => {
    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ maxRetries: 0, apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            user_id: "1234567890",
            subscription: {
                tier: "trial",
                character_count: 17231,
                character_limit: 100000,
                max_character_limit_extension: 10000,
                can_extend_character_limit: false,
                allowed_to_extend_character_limit: false,
                next_character_count_reset_unix: 1738356858,
                voice_slots_used: 1,
                professional_voice_slots_used: 0,
                voice_limit: 120,
                max_voice_add_edits: 230,
                voice_add_edit_counter: 212,
                professional_voice_limit: 1,
                can_extend_voice_limit: false,
                can_use_instant_voice_cloning: true,
                can_use_professional_voice_cloning: true,
                currency: "usd",
                status: "free",
                billing_period: "monthly_period",
                character_refresh_period: "monthly_period",
            },
            is_new_user: false,
            xi_api_key: "8so27l7327189x0h939ekx293380l920",
            can_use_delayed_payment_methods: false,
            is_onboarding_completed: true,
            is_onboarding_checklist_completed: true,
            first_name: "John",
            is_api_key_hashed: false,
            xi_api_key_preview: "xi_api_key_preview",
            referral_link_code: "referral_link_code",
            partnerstack_partner_default_link: "partnerstack_partner_default_link",
            created_at: 1753999199,
        };
        server.mockEndpoint().get("/v1/user").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.user.get();
        expect(response).toEqual({
            userId: "1234567890",
            subscription: {
                tier: "trial",
                characterCount: 17231,
                characterLimit: 100000,
                maxCharacterLimitExtension: 10000,
                canExtendCharacterLimit: false,
                allowedToExtendCharacterLimit: false,
                nextCharacterCountResetUnix: 1738356858,
                voiceSlotsUsed: 1,
                professionalVoiceSlotsUsed: 0,
                voiceLimit: 120,
                maxVoiceAddEdits: 230,
                voiceAddEditCounter: 212,
                professionalVoiceLimit: 1,
                canExtendVoiceLimit: false,
                canUseInstantVoiceCloning: true,
                canUseProfessionalVoiceCloning: true,
                currency: "usd",
                status: "free",
                billingPeriod: "monthly_period",
                characterRefreshPeriod: "monthly_period",
            },
            isNewUser: false,
            xiApiKey: "8so27l7327189x0h939ekx293380l920",
            canUseDelayedPaymentMethods: false,
            isOnboardingCompleted: true,
            isOnboardingChecklistCompleted: true,
            firstName: "John",
            isApiKeyHashed: false,
            xiApiKeyPreview: "xi_api_key_preview",
            referralLinkCode: "referral_link_code",
            partnerstackPartnerDefaultLink: "partnerstack_partner_default_link",
            createdAt: 1753999199,
        });
    });
});
