/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../../mock-server/MockServerPool";
import { ElevenLabsClient } from "../../../../src/Client";

describe("Widget", () => {
    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({ apiKey: "test", environment: server.baseUrl });

        const rawResponseBody = {
            agent_id: "agent_id",
            widget_config: {
                variant: "tiny",
                placement: "top-left",
                expandable: "never",
                avatar: { color_1: "#2792dc", color_2: "#9ce6e6", type: "orb" },
                feedback_mode: "none",
                bg_color: "bg_color",
                text_color: "text_color",
                btn_color: "btn_color",
                btn_text_color: "btn_text_color",
                border_color: "border_color",
                focus_color: "focus_color",
                border_radius: 1,
                btn_radius: 1,
                action_text: "action_text",
                start_call_text: "start_call_text",
                end_call_text: "end_call_text",
                expand_text: "expand_text",
                listening_text: "listening_text",
                speaking_text: "speaking_text",
                shareable_page_text: "shareable_page_text",
                shareable_page_show_terms: true,
                terms_text: "terms_text",
                terms_html: "terms_html",
                terms_key: "terms_key",
                show_avatar_when_collapsed: true,
                disable_banner: true,
                override_link: "override_link",
                mic_muting_enabled: true,
                transcript_enabled: true,
                text_input_enabled: true,
                default_expanded: true,
                always_expanded: true,
                text_contents: {
                    main_label: "main_label",
                    start_call: "start_call",
                    start_chat: "start_chat",
                    new_call: "new_call",
                    end_call: "end_call",
                    mute_microphone: "mute_microphone",
                    change_language: "change_language",
                    collapse: "collapse",
                    expand: "expand",
                    copied: "copied",
                    accept_terms: "accept_terms",
                    dismiss_terms: "dismiss_terms",
                    listening_status: "listening_status",
                    speaking_status: "speaking_status",
                    connecting_status: "connecting_status",
                    chatting_status: "chatting_status",
                    input_label: "input_label",
                    input_placeholder: "input_placeholder",
                    input_placeholder_text_only: "input_placeholder_text_only",
                    input_placeholder_new_conversation: "input_placeholder_new_conversation",
                    user_ended_conversation: "user_ended_conversation",
                    agent_ended_conversation: "agent_ended_conversation",
                    conversation_id: "conversation_id",
                    error_occurred: "error_occurred",
                    copy_id: "copy_id",
                },
                styles: {
                    base: "base",
                    base_hover: "base_hover",
                    base_active: "base_active",
                    base_border: "base_border",
                    base_subtle: "base_subtle",
                    base_primary: "base_primary",
                    base_error: "base_error",
                    accent: "accent",
                    accent_hover: "accent_hover",
                    accent_active: "accent_active",
                    accent_border: "accent_border",
                    accent_subtle: "accent_subtle",
                    accent_primary: "accent_primary",
                    overlay_padding: 1.1,
                    button_radius: 1.1,
                    input_radius: 1.1,
                    bubble_radius: 1.1,
                    sheet_radius: 1.1,
                    compact_sheet_radius: 1.1,
                    dropdown_sheet_radius: 1.1,
                },
                language: "en",
                supported_language_overrides: ["es", "fr"],
                language_presets: { key: {} },
                text_only: false,
                supports_text_only: true,
                first_message: "Hello! How can I help you today?",
            },
        };
        server
            .mockEndpoint()
            .get("/v1/convai/agents/21m00Tcm4TlvDq8ikWAM/widget")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.conversationalAi.agents.widget.get("21m00Tcm4TlvDq8ikWAM");
        expect(response).toEqual({
            agentId: "agent_id",
            widgetConfig: {
                variant: "tiny",
                placement: "top-left",
                expandable: "never",
                avatar: {
                    type: "orb",
                    color1: "#2792dc",
                    color2: "#9ce6e6",
                },
                feedbackMode: "none",
                bgColor: "bg_color",
                textColor: "text_color",
                btnColor: "btn_color",
                btnTextColor: "btn_text_color",
                borderColor: "border_color",
                focusColor: "focus_color",
                borderRadius: 1,
                btnRadius: 1,
                actionText: "action_text",
                startCallText: "start_call_text",
                endCallText: "end_call_text",
                expandText: "expand_text",
                listeningText: "listening_text",
                speakingText: "speaking_text",
                shareablePageText: "shareable_page_text",
                shareablePageShowTerms: true,
                termsText: "terms_text",
                termsHtml: "terms_html",
                termsKey: "terms_key",
                showAvatarWhenCollapsed: true,
                disableBanner: true,
                overrideLink: "override_link",
                micMutingEnabled: true,
                transcriptEnabled: true,
                textInputEnabled: true,
                defaultExpanded: true,
                alwaysExpanded: true,
                textContents: {
                    mainLabel: "main_label",
                    startCall: "start_call",
                    startChat: "start_chat",
                    newCall: "new_call",
                    endCall: "end_call",
                    muteMicrophone: "mute_microphone",
                    changeLanguage: "change_language",
                    collapse: "collapse",
                    expand: "expand",
                    copied: "copied",
                    acceptTerms: "accept_terms",
                    dismissTerms: "dismiss_terms",
                    listeningStatus: "listening_status",
                    speakingStatus: "speaking_status",
                    connectingStatus: "connecting_status",
                    chattingStatus: "chatting_status",
                    inputLabel: "input_label",
                    inputPlaceholder: "input_placeholder",
                    inputPlaceholderTextOnly: "input_placeholder_text_only",
                    inputPlaceholderNewConversation: "input_placeholder_new_conversation",
                    userEndedConversation: "user_ended_conversation",
                    agentEndedConversation: "agent_ended_conversation",
                    conversationId: "conversation_id",
                    errorOccurred: "error_occurred",
                    copyId: "copy_id",
                },
                styles: {
                    base: "base",
                    baseHover: "base_hover",
                    baseActive: "base_active",
                    baseBorder: "base_border",
                    baseSubtle: "base_subtle",
                    basePrimary: "base_primary",
                    baseError: "base_error",
                    accent: "accent",
                    accentHover: "accent_hover",
                    accentActive: "accent_active",
                    accentBorder: "accent_border",
                    accentSubtle: "accent_subtle",
                    accentPrimary: "accent_primary",
                    overlayPadding: 1.1,
                    buttonRadius: 1.1,
                    inputRadius: 1.1,
                    bubbleRadius: 1.1,
                    sheetRadius: 1.1,
                    compactSheetRadius: 1.1,
                    dropdownSheetRadius: 1.1,
                },
                language: "en",
                supportedLanguageOverrides: ["es", "fr"],
                languagePresets: {
                    key: {},
                },
                textOnly: false,
                supportsTextOnly: true,
                firstMessage: "Hello! How can I help you today?",
            },
        });
    });
});
